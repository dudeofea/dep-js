function Dep(){var d=[];var c=[];var b=null;var a=function(){if(c.length==0){return false}for(var e=0;e<c.length;e++){if(c[e]!==true){return false}}if(b!=null){b.apply(null,d)}return true};this.addDep=function(){var f=c.length;c.push(false);d.push(null);var e=function(){if(arguments.length<1){d[f]=null}else{if(arguments.length==1){d[f]=arguments[0]}else{var g=Array.prototype.slice.call(arguments,0);d[f]=g.sort()}}c[f]=true;a()};return e};this.calc=function(e){b=e;a()}};